# AI Purchase Agent ‚Äî –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è Claude

> **–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–∏ —Å 5 —Å–∞–π—Ç–æ–≤.
> **–°–∞–π—Ç:** https://poisk24na7.ru
> **–°–µ—Ä–≤–µ—Ä:** 62.113.37.2 (VPS –ú–æ—Å–∫–≤–∞)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   FastAPI       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Worker        ‚îÇ
‚îÇ   (tasks.html)  ‚îÇ     ‚îÇ   (main.py)     ‚îÇ     ‚îÇ   (worker.py)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ                        ‚îÇ
                               ‚ñº                        ‚ñº
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ   SQLite        ‚îÇ     ‚îÇ   5 –ü–∞—Ä—Å–µ—Ä–æ–≤    ‚îÇ
                        ‚îÇ   (tasks.db)    ‚îÇ     ‚îÇ   (Playwright)  ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ai-purchase-agent/
‚îú‚îÄ‚îÄ main.py                 # FastAPI endpoints
‚îú‚îÄ‚îÄ worker.py               # –§–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä (–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä—ã)
‚îú‚îÄ‚îÄ database.py             # SQLite –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ config.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ credentials
‚îÇ
‚îú‚îÄ‚îÄ zzap_cdp_client.py      # –ü–∞—Ä—Å–µ—Ä ZZAP
‚îú‚îÄ‚îÄ trast_cdp_client.py     # –ü–∞—Ä—Å–µ—Ä Trast
‚îú‚îÄ‚îÄ stparts_cdp_client.py   # –ü–∞—Ä—Å–µ—Ä STparts
‚îú‚îÄ‚îÄ autovid_cdp_client.py   # –ü–∞—Ä—Å–µ—Ä AutoVID
‚îú‚îÄ‚îÄ autotrade_client.py     # –ü–∞—Ä—Å–µ—Ä AutoTrade
‚îú‚îÄ‚îÄ base_browser_client.py  # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø–∞—Ä—Å–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ sites/tasks.html        # –§—Ä–æ–Ω—Ç–µ–Ω–¥ (PWA)
‚îú‚îÄ‚îÄ templates/              # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile              # –û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt        # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # Unit-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_zzap_parser.py
‚îÇ   ‚îú‚îÄ‚îÄ test_trast_parser.py
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/           # –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ HTML –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ CLAUDE.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ ROADMAP.md              # –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
```

---

## üîß –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| Backend | FastAPI + Python 3.11 |
| Frontend | Vanilla JS (PWA) |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | SQLite (tasks.db) |
| –ü–∞—Ä—Å–∏–Ω–≥ | Playwright (headless Chromium) |
| AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç | Perplexity API (sonar-pro) |
| –î–µ–ø–ª–æ–π | Docker + nginx |
| –°–µ—Ä–≤–µ—Ä | Ubuntu 24, VPS –ú–æ—Å–∫–≤–∞ |

---

## üåê –ü–∞—Ä—Å–µ—Ä—ã ‚Äî –ö–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### 1. ZZAP (zzap_cdp_client.py)
**URL:** https://www.zzap.ru
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –±—Ä–µ–Ω–¥–∞ ‚Üí –Ω—É–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –Ω—É–∂–Ω—ã–π –±—Ä–µ–Ω–¥
- AJAX –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã ‚Üí –∂–¥—ë–º –¥–æ 10 —Å–µ–∫, –ø–æ—Ç–æ–º reload
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º **–ø–µ—Ä–≤—ã–µ 20 —Å—Ç—Ä–æ–∫** (—Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ 15+ –ø–æ–∑–∏—Ü–∏–∏)
- **–í–ê–ñ–ù–û:** –£–¥–∞–ª—è–µ–º "–ó–∞–∫–∞–∑ –æ—Ç X —Ä." –ø–µ—Ä–µ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ü–µ–Ω—ã!

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
```python
# –Ø—á–µ–π–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç: "–ó–∞–∫–∞–∑ –æ—Ç 10 000—Ä.\n\n5 800—Ä.\n–ù–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç."
# –ë–ï–ó –æ—á–∏—Å—Ç–∫–∏: –ø–∞—Ä—Å–µ—Ä –±—Ä–∞–ª 10000 (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
# –° –æ—á–∏—Å—Ç–∫–æ–π: –ø–∞—Ä—Å–µ—Ä –±–µ—Ä—ë—Ç 5800 (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
cleaned_text = re.sub(r'–ó–∞–∫–∞–∑ –æ—Ç\s*[\d\s]+—Ä\.?', '', cell_text)
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±/—É —Ç–æ–≤–∞—Ä–æ–≤:**
- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —Å "–±/—É", "—É—Ü–µ–Ω–∫–∞", "–±—ã–≤—à", "–≤ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏"


### 2. Trast (trast_cdp_client.py)
**URL:** https://trast-zapchast.ru
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è (TRAST_LOGIN, TRAST_PASSWORD)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- JS-challenge –∑–∞—â–∏—Ç–∞ ‚Üí stealth —Ä–µ–∂–∏–º –±—Ä–∞—É–∑–µ—Ä–∞
- –ú–∞–ø–ø–∏–Ω–≥ –±—Ä–µ–Ω–¥–æ–≤: "PEUGEOT" ‚Üí ["peugeot-citroen", "peugeot", "psa"]
- –¶–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ "4 700‚ÇΩ"


### 3. STparts (stparts_cdp_client.py)
**URL:** https://stparts.ru
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è (STPARTS_LOGIN, STPARTS_PASSWORD)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä—è–º–æ–π URL —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: `/search/{brand}/{partnumber}`
- –¢–∞–±–ª–∏—Ü–∞ —Å –∫–ª–∞—Å—Å–æ–º `#searchResultsTable`
- –¶–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ "141,40 ‚ÇΩ"


### 4. AutoVID (autovid_cdp_client.py)
**URL:** https://auto-vid.com
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è + –≥–∞–ª–æ—á–∫–∞ "–°–æ–≥–ª–∞—Å–µ–Ω —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π"

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- WooCommerce –º–∞–≥–∞–∑–∏–Ω
- –§–∏–ª—å—Ç—Ä—É–µ–º "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏"
- –¶–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ "3 200‚ÇΩ" –∏–ª–∏ "—Ä—É–±"


### 5. AutoTrade (autotrade_client.py)
**URL:** https://sklad.autotrade.su
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è (AUTOTRADE_EMAIL, AUTOTRADE_PASSWORD)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –§–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞: `input#log_u`, `input#log_p`, `button#linkLogIn`
- **–í–ê–ñ–ù–û:** –ü–∞—Ä—Å–∏–º —Ü–µ–Ω—ã –¢–û–õ–¨–ö–û –∏–∑ —Å—Ç—Ä–æ–∫ —Å "–ê—Ä—Ç–∏–∫—É–ª:" ‚Äî –∏–Ω–∞—á–µ –∑–∞—Ö–≤–∞—Ç–∏–º –±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞!

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
```python
# –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å "–ë–∞–ª–∞–Ω—Å: 92 585 RUB" ‚Äî —ç—Ç–æ –ù–ï —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞!
# –†–µ—à–µ–Ω–∏–µ: –∏–∑–≤–ª–µ–∫–∞–µ–º —Ü–µ–Ω—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å "–ê—Ä—Ç–∏–∫—É–ª:"
if '–ê—Ä—Ç–∏–∫—É–ª:' not in row_text:
    return None  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º
```

---

## üöÄ –î–µ–ø–ª–æ–π

### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (—á–µ—Ä–µ–∑ volume mounts)
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /opt/ai-purchase-agent
git pull
docker-compose restart worker  # –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!
```

### –ü–æ–ª–Ω—ã–π rebuild (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è Dockerfile)
```bash
cd /opt/ai-purchase-agent
git pull
docker-compose down
docker-compose up -d --build
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ cookies
```bash
docker-compose exec worker rm -rf /app/cookies_backup/*
docker-compose restart worker
```

### Volume mounts (docker-compose.yml)
```yaml
services:
  worker:
    volumes:
      - ./zzap_cdp_client.py:/app/zzap_cdp_client.py
      - ./stparts_cdp_client.py:/app/stparts_cdp_client.py
      - ./trast_cdp_client.py:/app/trast_cdp_client.py
      - ./autovid_cdp_client.py:/app/autovid_cdp_client.py
      - ./autotrade_client.py:/app/autotrade_client.py
      - ./worker.py:/app/worker.py
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

1. [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `pytest tests/ -v`
2. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `python -m py_compile *.py`
3. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ª–æ–∫–∞–ª–∏
4. [ ] Git commit —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
5. [ ] –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è ‚Äî —Ç–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∞—Ä—Ç–∏–∫—É–ª–µ

---

## üß™ –¢–µ—Å—Ç—ã

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
cd /opt/ai-purchase-agent
pytest tests/ -v
```

### –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
```bash
pytest tests/test_zzap_parser.py -v
```

### –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏–∑ HTML
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±/—É —Ç–æ–≤–∞—Ä–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ "–ó–∞–∫–∞–∑ –æ—Ç"
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –±—Ä–µ–Ω–¥—É
- –ú–∞–ø–ø–∏–Ω–≥ –±—Ä–µ–Ω–¥–æ–≤ (Trast)

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ZZAP –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ü–µ–Ω—É
**–ü—Ä–∏—á–∏–Ω–∞:** "–ó–∞–∫–∞–∑ –æ—Ç X —Ä." –∏–ª–∏ —Ü–µ–Ω–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø–µ—Ä–≤—ã—Ö 10 —Å—Ç—Ä–æ–∫
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `rows[:20]` (–Ω–µ 10)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å regex —É–¥–∞–ª–µ–Ω–∏—è "–ó–∞–∫–∞–∑ –æ—Ç"

### AutoTrade –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –≤–º–µ—Å—Ç–æ —Ü–µ–Ω—ã
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä—Å–µ—Ä –±–µ—Ä—ë—Ç —á–∏—Å–ª–æ –∏–∑ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ (–±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞)
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ–∫–∞—Ç—å —Ü–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑ —Å—Ç—Ä–æ–∫ —Å "–ê—Ä—Ç–∏–∫—É–ª:"

### Trast –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** JS-challenge –Ω–µ –ø—Ä–æ–π–¥–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å stealth –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É–≤–µ–ª–∏—á–∏—Ç—å timeout

### STparts –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
**–ü—Ä–∏—á–∏–Ω–∞:** –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è (–Ω–µ –†–æ—Å—Å–∏—è)
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –≤ –†–æ—Å—Å–∏–∏

### AJAX —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω reload –ø–æ—Å–ª–µ 10 —Å–µ–∫ –æ–∂–∏–¥–∞–Ω–∏—è

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ worker
```bash
docker-compose logs --tail=100 worker
docker-compose logs -f worker  # –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

### –§–∏–ª—å—Ç—Ä –ø–æ –ø–∞—Ä—Å–µ—Ä—É
```bash
docker-compose logs worker 2>&1 | grep -i zzap
docker-compose logs worker 2>&1 | grep -i trast
```

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤
- `INFO` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `DEBUG` ‚Äî –¥–µ—Ç–∞–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≤–∫–ª—é—á–∏—Ç—å –≤ config.py)
- `ERROR` ‚Äî –æ—à–∏–±–∫–∏

---

## üîê Credentials (config.py)

```python
# –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git! –ò—Å–ø–æ–ª—å–∑—É–π .env
TRAST_LOGIN = os.getenv("TRAST_LOGIN")
TRAST_PASSWORD = os.getenv("TRAST_PASSWORD")
STPARTS_LOGIN = os.getenv("STPARTS_LOGIN")
STPARTS_PASSWORD = os.getenv("STPARTS_PASSWORD")
AUTOVID_LOGIN = os.getenv("AUTOVID_LOGIN")
AUTOVID_PASSWORD = os.getenv("AUTOVID_PASSWORD")
AUTOTRADE_EMAIL = os.getenv("AUTOTRADE_EMAIL")
AUTOTRADE_PASSWORD = os.getenv("AUTOTRADE_PASSWORD")
PERPLEXITY_API_KEY = os.getenv("PERPLEXITY_API_KEY")
```

---

## üìù –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∞

1. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º**
2. **–õ–æ–≥–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º** —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –ø–∞—Ä—Å–µ—Ä–∞: `[zzap]`, `[trast]`
3. **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON** —Å –ø–æ–ª–µ–º `answer`
4. **–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
5. **–¢–µ—Å—Ç—ã:** pytest, —Ñ–∞–π–ª—ã `test_*.py`

---

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### –†–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –ü–æ–∏—Å–∫ —Ü–µ–Ω –ø–æ 5 –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –±—Ä–µ–Ω–¥—É
- AI-—á–∞—Ç —Å Perplexity
- PWA –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- CSV –∏–º–ø–æ—Ä—Ç
- Volume mounts –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ üöß
- GitHub Actions (CI/CD)
- Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞—Ä—Å–µ—Ä–æ–≤
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è ‚ö†Ô∏è
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iOS PWA
- STparts —Ç—Ä–µ–±—É–µ—Ç —Ä–æ—Å—Å–∏–π—Å–∫–∏–π IP
- AutoTrade –∏–Ω–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –≤–º–µ—Å—Ç–æ —Ü–µ–Ω—ã (—Ñ–∏–∫—Å –≤ –∫–æ–¥–µ)

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@62.113.37.2

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd /opt/ai-purchase-agent

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart worker
docker-compose restart web

# –õ–æ–≥–∏
docker-compose logs -f

# –¢–µ—Å—Ç –ø–∞—Ä—Å–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é
docker-compose exec worker python -c "
import asyncio
from zzap_cdp_client import ZZapCDPClient
async def test():
    async with ZZapCDPClient() as client:
        result = await client.search_part('1751493', 'FORD')
        print(result)
asyncio.run(test())
"
```

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 25.01.2026*
*–ü–æ—Å–ª–µ –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –æ–±–Ω–æ–≤–ª—è–π —ç—Ç–æ—Ç —Ñ–∞–π–ª!*

---

## üîß –ü–∞—Ä—Å–µ—Ä—ã ‚Äî –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–æ 25.01.2026)

### ZZAP
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º **–ø–µ—Ä–≤—ã–µ 20 —Å—Ç—Ä–æ–∫** (–Ω–µ 10!) ‚Äî —Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ 15+ –ø–æ–∑–∏—Ü–∏–∏
- **–£–¥–∞–ª—è–µ–º "–ó–∞–∫–∞–∑ –æ—Ç X —Ä."** –ø–µ—Ä–µ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ü–µ–Ω—ã:
```python
  cleaned_text = re.sub(r'–ó–∞–∫–∞–∑ –æ—Ç\s*[\d\s]+—Ä\.?', '', cell_text)
```
- –§–∏–ª—å—Ç—Ä—É–µ–º –±/—É: "–±/—É", "—É—Ü–µ–Ω–∫–∞", "–±—ã–≤—à"
- –ü—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏ AJAX ‚Äî reload —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Å–ª–µ 10 —Å–µ–∫

### AutoTrade
- –ü–∞—Ä—Å–∏–º —Ü–µ–Ω—ã –¢–û–õ–¨–ö–û –∏–∑ —Å—Ç—Ä–æ–∫ —Å "–ê—Ä—Ç–∏–∫—É–ª:"
- –ò–Ω–∞—á–µ –∑–∞—Ö–≤–∞—Ç–∏–º –±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞ (92 585 RUB) –∫–∞–∫ —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞!

### Trast
- JS-challenge –∑–∞—â–∏—Ç–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º stealth —Ä–µ–∂–∏–º
- –ú–∞–ø–ø–∏–Ω–≥ –±—Ä–µ–Ω–¥–æ–≤: PEUGEOT ‚Üí [peugeot-citroen, psa]

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (volume mounts)
```bash
cd /opt/ai-purchase-agent && git pull && docker-compose restart worker
```

–ù–µ –Ω—É–∂–µ–Ω rebuild ‚Äî —Ñ–∞–π–ª—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é!

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
1. pytest tests/ -v
2. python -m py_compile *.py
3. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è ‚Äî —Ç–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∞—Ä—Ç–∏–∫—É–ª–µ (1751493 Ford)

---

## üêõ –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ZZAP 6400‚ÇΩ –≤–º–µ—Å—Ç–æ 5800‚ÇΩ ‚Üí —É–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –¥–æ 20 —Å—Ç—Ä–æ–∫ + —É–¥–∞–ª–µ–Ω–∏–µ "–ó–∞–∫–∞–∑ –æ—Ç"
- AutoTrade –±–∞–ª–∞–Ω—Å –∫–∞–∫ —Ü–µ–Ω–∞ ‚Üí —Ñ–∏–ª—å—Ç—Ä –ø–æ "–ê—Ä—Ç–∏–∫—É–ª:"
